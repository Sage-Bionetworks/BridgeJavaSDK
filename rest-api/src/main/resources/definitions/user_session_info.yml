readOnly: true
allOf:
    - $ref: ./abstract_study_participant.yml
    - description: |
        Information about the user and their session.
    - type: object
    - properties:
        authenticated:
            type: boolean
            description: Is the user currently authenticated?
        sessionToken:
            type: string
            description: The session token that must be returned to the server to access services requiring authentication.
        reauthToken:
            type: string
            description: |
                A token, supplied when a new session is returned, that can be used to refresh the
                session at a later time. The API to reauthenticate with the token will refresh your 
                session token and reset the session's timeout value. The reauthentication token can 
                only be used one time. 
        environment:
            $ref: ./enums/environment.yml
        email:
            type: string
            description: The user's email.
        phone:
            $ref: ./phone.yml
        externalId:
            type: string
            description: |
                An externally-assignable identifier a research partner can use to re-identify a user's data in the exported data set (this must be provided by the application, it is not created by Bridge). It is a string that can be set or updated to any value without constraints, unless Bridge is configured to manage the study's external IDs. Then the ID must be submitted on sign up, and cannot be modified afterward.
        dataSharing:
            type: boolean
            description: True if the sharing scope is anything other than "no_sharing".
        signedMostRecentConsent:
            type: boolean
            description: True if all *required* consents have been signed and the versions signed are the most up-to-date versions of those consents.
        consented:
            type: boolean
            description: True if all required consents have been signed.
        consentStatuses:
            type: object
            description: |
                A mapping from a subpopulation GUID to information about the participant's consent status 
                in that subpopulation (whether consented or not). Only the subpopulations that currently apply 
                to this user will have a ConsentStatus object in the map.
            additionalProperties:
                $ref: ../definitions/consent_status.yml
        type:
            type: string
            readOnly: true
            description: "UserSessionInfo"
